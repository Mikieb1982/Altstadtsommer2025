<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Winning Number Checker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --background-color-start: #781d7e;
            --background-color-end: #d71969;
            --app-background-color: rgba(44, 0, 43, 0.5);
            --input-background-color: rgba(0, 0, 0, 0.2);
            --text-color: #ffffff;
            --text-color-secondary: rgba(255, 255, 255, 0.85); /* Increased contrast for WCAG AA */
            --primary-color: #f58220;
            --primary-hover-color: #f79c4a;
            --button-text-color: #000000; /* Increased contrast for WCAG AA */
            --win-color: #f58220;
            --loss-color: #ff4d4d;
            --border-color: rgba(255, 255, 255, 0.3);
            --font-family: 'Inter', sans-serif;
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
        }

        body {
            font-family: var(--font-family);
            background: linear-gradient(135deg, var(--background-color-start), var(--background-color-end));
            color: var(--text-color);
            display: grid;
            place-items: center;
            padding: 1rem;
            font-size: 18px;
            line-height: 1.6;
        }

        #root {
            width: 100%;
            max-width: 500px;
            text-align: center;
            position: relative;
        }

        .app-container {
            background-color: var(--app-background-color);
            padding: 2.5rem 2rem;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            width: 100%;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .lang-toggle {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            background: none;
            border: none;
            font-family: var(--font-family);
            font-weight: 700;
            color: var(--text-color-secondary);
            cursor: pointer;
            font-size: 0.9rem;
            padding: 0.5rem;
            border-radius: 8px;
            transition: color 0.2s ease-in-out, background-color 0.2s ease-in-out;
            z-index: 10;
        }

        .lang-toggle:hover,
        .lang-toggle:focus {
            color: var(--primary-color);
            background-color: rgba(245, 130, 32, 0.1);
            outline: none;
        }

        .logo-header {
            margin-bottom: 1rem;
            font-weight: 900;
            text-transform: uppercase;
        }

        .logo-main {
            display: block;
            font-size: 2rem;
            color: var(--primary-color);
            letter-spacing: 1px;
            line-height: 1;
        }

        .logo-sub {
            display: block;
            font-size: 3rem;
            color: var(--text-color);
            letter-spacing: -2px;
            line-height: 1;
        }

        .title {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            font-weight: 400;
            color: var(--text-color-secondary);
        }

        .label {
            /* The placeholder and prominent input make it redundant, but keep for screen readers */
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        .input-field {
            width: 100%;
            padding: 1rem;
            font-size: 1.5rem;
            text-align: center;
            background-color: var(--input-background-color);
            color: var(--text-color);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 1.5rem;
            font-family: var(--font-family);
            transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        /* hide number input arrows */
        .input-field::-webkit-outer-spin-button,
        .input-field::-webkit-inner-spin-button {
          -webkit-appearance: none;
          margin: 0;
        }
        .input-field[type=number] {
          -moz-appearance: textfield;
        }

        .input-field:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(245, 130, 32, 0.4);
            outline: none;
        }

        .button {
            width: 100%;
            padding: 1rem;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--button-text-color);
            background-color: var(--primary-color);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, opacity 0.2s ease-in-out;
        }

        .button:hover,
        .button:focus {
            background-color: var(--primary-hover-color);
            outline: none;
        }

        .button:disabled {
            background-color: var(--primary-color);
            opacity: 0.5;
            cursor: not-allowed;
        }

        .result-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 250px;
        }

        .result-icon {
            font-size: 80px;
            line-height: 1;
        }

        .result-icon.win {
            color: var(--win-color);
        }

        .result-icon.loss {
            color: var(--loss-color);
        }

        .result-text {
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 1.5rem;
        }

        .prize-card {
            background-color: var(--input-background-color);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            width: 100%;
            text-align: left;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .prize-header {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--text-color-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .prize-description {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary-color);
            line-height: 1.2;
        }

        .prize-sponsor {
            font-size: 0.9rem;
            color: var(--text-color-secondary);
        }


        /* For smaller devices */
        @media (max-width: 600px) {
            body {
                font-size: 16px;
            }
            .app-container {
                padding: 2rem 1.5rem;
            }
            .logo-main {
                font-size: 1.8rem;
            }
            .logo-sub {
                font-size: 2.5rem;
            }
            .title {
                font-size: 1.2rem;
            }
            .result-text {
                font-size: 1.2rem;
            }
            .prize-description {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script type="module">
        // --- DATA SOURCE ---
        const prizes = {
            345: { nr: 1, sponsor: "Fahrradhaus Ahlert, Berliner Str. 21, Bad Belzig", prize: "1 Sportrad + Fahrradhelm" },
            79: { nr: 2, sponsor: "Euronics Bild und Ton, Sandberger Str. 2, Bad Belzig", prize: "1 Fernseher" },
            473: { nr: 3, sponsor: "Idee + Spiel Antje Große, Sandbergerstr. 14-16, Bad Belzig", prize: "1 Spielhaus" },
            1162: { nr: 4, sponsor: "Elektro Knape GmbH, Im Gewerbepark Seedoche 26, Bad Belzig", prize: "1 Akkustaubsauger von Samsung" },
            737: { nr: 5, sponsor: "Lafim-Diakonie, Im Gewerbepark Seedoche 9, Bad Belzig", prize: "1 Holzbank" },
            241: { nr: 6, sponsor: "Euronics Bild und Ton, Sandberger Str. 2, Bad Belzig", prize: "1 Soundsystem" },
            840: { nr: 7, sponsor: "Nord Ostsee Automobile Im Gewerbepark Seedoche 1, Bad Belzig", prize: "1 Wochenende mit dem KONA Elektro oder IONIQ 5" },
            1141: { nr: 8, sponsor: "Natur Konkret Lütte, Chausseestr. 48, Bad Belzig/OT Lütte", prize: "1 Nacht in Fewo-Teichland für 4 Personen" },
            11: { nr: 9, sponsor: "Trockenbau Tietz, Friedrich-Engels-Str. 15, Bad Belzig", prize: "1 Akkuschrauber von Makita" },
            1789: { nr: 10, sponsor: "Iris Optik, Straße der Einheit 20-42, Bad Belzig", prize: "Wertgutschein" },
            1912: { nr: 11, sponsor: "Apollo Optik, Straße der Einheit 32, Bad Belzig", prize: "Wertgutschein" },
            700: { nr: 12, sponsor: "Nord Ostsee Automobile Im Gewerbepark Seedoche 1, Bad Belzig", prize: "1 Servicegutschein im Wert von 100 €" },
            1811: { nr: 13, sponsor: "Bünicke Motorgeräte, Chausseestr. 13, Bad Belzig/OT Lütte", prize: "1 Hochentaster" },
            1794: { nr: 14, sponsor: "Auto- und Zweiradbedarf, Wiesenburger Str. 22, Bad Belzig", prize: "1 Kleinkompressor für Auto + Fahrrad" },
            1402: { nr: 15, sponsor: "Friseur Dumschat, Sandberger Str. 15, Bad Belzig", prize: "1x Waschen, Schneiden, Föhnen" },
            1498: { nr: 16, sponsor: "Belziger Baustoffhandel/Raifeisenmarkt, Karl-Marx-Str. 18, Bad Belzig", prize: "1 Kleindüngerstreuer" },
            23: { nr: 17, sponsor: "Euronics Bild und Ton, Sandberger Str. 2, Bad Belzig", prize: "1 FM Radio" },
            1925: { nr: 18, sponsor: "Euronics Bild und Ton, Sandberger Str. 2, Bad Belzig", prize: "1 FM Radio" },
            475: { nr: 19, sponsor: "Nord Ostsee Automobile Im Gewerbepark Seedoche 1, Bad Belzig", prize: "1 Servicegutschein im Wert von 50 €" },
            1735: { nr: 20, sponsor: "REMA Fahrzeug- und Landtechnik GmbH, Am Denkmal 1, Bad Belzig/OT Schwanebeck", prize: "1 ferngesteuerter Mähdrescher" },
            1873: { nr: 21, sponsor: "Landhaus Sternberg, Lüsse, Lüsse 31", prize: "Wertgutschein" },
            1359: { nr: 22, sponsor: "Landhaus Sternberg, Lüsse, Lüsse 31", prize: "Wertgutschein" },
            1507: { nr: 23, sponsor: "MCB Autoservice, Gartenstraße 4, Bad Belzig", prize: "Wertgutschein" },
            663: { nr: 24, sponsor: "MCB Autoservice, Gartenstraße 4, Bad Belzig", prize: "Wertgutschein" },
            1: { nr: 25, sponsor: "Schreibwarenhöhne, Straße der Einheit 22, Bad Belzig", prize: "Schreibmappe (I-Pad, Organizer)" },
            1042: { nr: 26, sponsor: "Alter Brauhof, Straße der Einheit 16, Bad Belzig", prize: "Wertgutschein" },
            1718: { nr: 27, sponsor: "Steakhaus Cascada, Straße der Einheit 30, Bad Belzig", prize: "Wertgutschein" },
            661: { nr: 28, sponsor: "Burgmetzgerei Bad Belzig, Bahnhofstr. 9, Bad Belzig", prize: "Wertgutschein" },
            717: { nr: 29, sponsor: "Apollo Optik, Straße der Einheit 32, Bad Belzig", prize: "Wertgutschein" },
            213: { nr: 30, sponsor: "Apollo Optik, Straße der Einheit 32, Bad Belzig", prize: "Wertgutschein" },
            1868: { nr: 31, sponsor: "Frisör Schönheitsfleck, Straße der Einheit 36, Bad Belzig", prize: "Wertgutschein" },
            80: { nr: 32, sponsor: "Getränkehandel Kraft, Brücker Landstr. 7, Bad Belzig", prize: "Wertgutschein" },
            618: { nr: 33, sponsor: "Getränkehandel Kraft, Brücker Landstr. 7, Bad Belzig", prize: "Wertgutschein" },
            1385: { nr: 34, sponsor: "Fitness- und Gesundheitsclub Relaxare, Martin-Luther-Str. 12, Bad Belzig", prize: "Wertgutschein" },
            1235: { nr: 35, sponsor: "Die Brille am Markt, Marktplatz 4, Bad Belzig", prize: "Wertgutschein" },
            627: { nr: 36, sponsor: "Die Brille am Markt, Marktplatz 4, Bad Belzig", prize: "Wertgutschein" },
            1164: { nr: 37, sponsor: "Modehaus Ehle, Straße der Einheit 13, Bad Belzig", prize: "1 Tasche" },
            765: { nr: 38, sponsor: "Modehaus Ehle, Straße der Einheit 13, Bad Belzig", prize: "1 Portemonaie" },
            1983: { nr: 39, sponsor: "Euronics Bild und Ton, Sandberger Str. 2, Bad Belzig", prize: "Akku-Fenstersauger-Set" },
            354: { nr: 40, sponsor: "Märkische Apotheke, Ernst-Thälmann-Str. 59 a, 14822 Brück", prize: "Wertgutschein" },
            1058: { nr: 41, sponsor: "Buchhandlung Ritter, Sandberger Str. 4, Bad Belzig", prize: "Wertgutschein" },
            547: { nr: 42, sponsor: "Reitstall Peters, Im Winkel 22, 14822 Brück/OT Baitz", prize: "1 Reitstunde" },
            625: { nr: 43, sponsor: "Reitstall Peters, Im Winkel 22, 14822 Brück/OT Baitz", prize: "1 Reitstunde" },
            1544: { nr: 44, sponsor: "Reiter- und Erlebnisbauernhof Groß Briesen, Kietz 11, Bad Belzig/OT Groß Briesen", prize: "1 Reitstunde" },
            540: { nr: 45, sponsor: "Frisörsalon Jan Schönwetter, Straße der Einheit 9, Bad Belzig", prize: "1x Waschen, Schneiden, Föhnen" },
            1890: { nr: 46, sponsor: "Autohaus Böttche, Brandenburger Str. 58, Bad Belzig", prize: "1 x Polarbox und 1 Trinkflasche" },
            1444: { nr: 47, sponsor: "Autohaus Böttche, Brandenburger Str. 58, Bad Belzig", prize: "1 x Polarbox und 1 Trinkflasche" },
            268: { nr: 48, sponsor: "Steintherme Bad Belzig", prize: "Wertgutschein" },
            1428: { nr: 49, sponsor: "Steintherme Bad Belzig", prize: "Tageskarte für Sauna und Badewelt" },
            1604: { nr: 50, sponsor: "Hünig Watsana Thai Massage, Niemegker Str. 18, Bad Belzig", prize: "1x halbe Stunde Massage" },
            1020: { nr: 51, sponsor: "Hünig Watsana Thai Massage, Niemegker Str. 18, Bad Belzig", prize: "1x halbe Stunde Massage" },
            972: { nr: 52, sponsor: "Gewinner", prize: "#" },
            733: { nr: 53, sponsor: "Blumengeschäft Anke Horn, Straße der Einheit 31, Bad Belzig", prize: "Wertgutschein" },
            978: { nr: 54, sponsor: "Blumengeschäft Anke Horn, Straße der Einheit 31, Bad Belzig", prize: "Wertgutschein" },
            519: { nr: 55, sponsor: "Gaststätte Paradies, Am Sportplatz 10, BadBelzig/OT Dippmannsdorf", prize: "Wertgutschein" },
            735: { nr: 56, sponsor: "Frisör Wricke, Briesenerstr. 19, Ragösen", prize: "Wertgutschein" },
            1132: { nr: 57, sponsor: "Haar Planet 21, Brandenburger Str. 12, Bad Belzig", prize: "Wertgutschein" },
            1760: { nr: 58, sponsor: "Haar Planet 21, Brandenburger Str. 12, Bad Belzig", prize: "Wertgutschein" },
            520: { nr: 59, sponsor: "Fitness- und Gesundheitsclub Relaxare, Martin-Luther-Str. 12, Bad Belzig", prize: "Wertgutschein" },
            851: { nr: 60, sponsor: "Eisenwaren Nitschke, Straße der Einheit 18, Bad Belzig", prize: "Wertgutschein" },
            267: { nr: 61, sponsor: "Märkische Apotheke, Ernst-Thälmann-Str. 59 a, 14822 Brück", prize: "Wertgutschein" },
            458: { nr: 62, sponsor: "Reha-Klinik „Hoher Fläming“, Hermann-Lielje-Straße 3, Bad Belzig", prize: "Wertgutschein" },
            678: { nr: 63, sponsor: "Reha-Klinik „Hoher Fläming“, Hermann-Lielje-Straße 3, Bad Belzig", prize: "Wertgutschein" },
            271: { nr: 64, sponsor: "Seecafé Bad Belzig", prize: "Wertgutschein" },
            1135: { nr: 65, sponsor: "Seecafé Bad Belzig", prize: "Wertgutschein" },
            619: { nr: 66, sponsor: "Textiladen P-han, Wiesenburger Str. 8, Bad Belzig", prize: "Wertgutschein" },
            608: { nr: 67, sponsor: "Old Sandill Whisky Destillerie, Wittenberger Str. 1, Bad Belzig", prize: "1 Flasche Whisky" },
            1687: { nr: 68, sponsor: "TeeArt Café, Teeshop, Straße der Einheit 20, Bad Belzig", prize: "Tee-Auswahl" },
            121: { nr: 69, sponsor: "Kultur bei Racha & Roger, Straße d. Einheit 24, Bad Belzig", prize: "Wertgutschein" },
            1862: { nr: 70, sponsor: "Kultur bei Racha & Roger, Straße d. Einheit 24, Bad Belzig", prize: "Wertgutschein" },
            463: { nr: 71, sponsor: "Kultur bei Racha & Roger, Straße d. Einheit 24, Bad Belzig", prize: "Wertgutschein" },
            565: { nr: 72, sponsor: "Reiter- und Erlebnisbauernhof Groß Briesen, Kietz 11, Bad Belzig/OT Groß Briesen", prize: "1 Salami" },
            360: { nr: 73, sponsor: "Eiscafé Franke, Straße der Einheit 2, Bad Belzig", prize: "Wertgutschein" },
            908: { nr: 74, sponsor: "Eiscafé Franke, Straße der Einheit 2, Bad Belzig", prize: "Wertgutschein" },
            1644: { nr: 75, sponsor: "Eiscafé Franke, Straße der Einheit 2, Bad Belzig", prize: "Wertgutschein" },
            320: { nr: 76, sponsor: "Flaming-Alpakas, am Lütter Bach, Lütte", prize: "Alpaka-Wanderung für 1 Person" },
            52: { nr: 77, sponsor: "Buchhandlung Ritter, Sandberger Str. 4, Bad Belzig", prize: "Wanderbuch" },
            400: { nr: 78, sponsor: "Zeitungseck, Straße der Einheit 34, Bad Belzig", prize: "Käse-Dose" },
            1935: { nr: 79, sponsor: "Frisör Markowski, Niemegker Str. 20, Bad Belzig", prize: "1 Fußpflege" },
            509: { nr: 80, sponsor: "Frisör Markowski, Niemegker Str. 20, Bad Belzig", prize: "1 Fußpflege" },
            1203: { nr: 81, sponsor: "Euronics Bild und Ton, Sandberger Str. 2, Bad Belzig", prize: "1 Tee-Maschine" },
            1492: { nr: 82, sponsor: "Euronics Bild und Ton, Sandberger Str. 2, Bad Belzig", prize: "1 Mobiler Dampfgarer" },
            133: { nr: 83, sponsor: "Ehle Uhren und Schmuck, Luisenstraße 1, 14822 Brück", prize: "11 verschiedene Kleinteile" },
            1649: { nr: 84, sponsor: "Ehle Uhren und Schmuck, Luisenstraße 1, 14822 Brück", prize: "1 Tüte" },
            340: { nr: 85, sponsor: "Ehle Uhren und Schmuck, Luisenstraße 1, 14822 Brück", prize: "1 Tüte" },
            304: { nr: 86, sponsor: "Ehle Uhren und Schmuck, Luisenstraße 1, 14822 Brück", prize: "1 Tüte" },
            890: { nr: 87, sponsor: "Ehle Uhren und Schmuck, Luisenstraße 1, 14822 Brück", prize: "1 Tüte" },
            38: { nr: 88, sponsor: "Ehle Uhren und Schmuck, Luisenstraße 1, 14822 Brück", prize: "1 Tüte" },
            154: { nr: 89, sponsor: "Paulinenhof, Kuhlowitzer Dorfstraße 1, Bad Belzig/OT Kuhlowitz", prize: "Gutschein 1 Burger + Kino" },
            850: { nr: 90, sponsor: "Paulinenhof, Kuhlowitzer Dorfstraße 1, Bad Belzig/OT Kuhlowitz", prize: "Gutschein Day-Spa" },
            1599: { nr: 91, sponsor: "Agrargenossenschaft", prize: "1x 20 kg Kartoffeln" },
            1028: { nr: 92, sponsor: "Agrargenossenschaft", prize: "1x 20 kg Kartoffeln" },
            49: { nr: 93, sponsor: "Agrargenossenschaft", prize: "1x 10 kg Kartoffeln" },
            900: { nr: 94, sponsor: "Herbert Grüneberg, Lütte", prize: "1x Kartoffeln" },
            1758: { nr: 95, sponsor: "NABU", prize: "1 Kalender 2026" },
            30: { nr: 96, sponsor: "NABU", prize: "1 Kalender 2026" },
            433: { nr: 97, sponsor: "NABU", prize: "1 Kalender 2026" },
            1143: { nr: 98, sponsor: "NABU", prize: "1 Kalender 2026" },
            745: { nr: 99, sponsor: "NABU", prize: "1 Kalender 2026" }
        };

        // --- LOCALIZATION ---
        const translations = {
            en: {
                title: "Raffle Checker",
                label: "Enter your number",
                checkButton: "Check Number",
                winMessage: "Congratulations! You have a winning number.",
                lossMessage: "Sorry, this is not a winning number.",
                checkAnotherButton: "Check Another",
                langToggle: "DEUTSCH",
                inputAriaLabel: "Lottery number input",
                prizeHeader: "Prize Nr.",
                sponsoredBy: "Sponsored by",
            },
            de: {
                title: "Los Prüfer",
                label: "Geben Sie Ihre Nummer ein",
                checkButton: "Nummer prüfen",
                winMessage: "Herzlichen Glückwunsch! Sie haben eine Gewinnzahl.",
                lossMessage: "Leider ist dies keine Gewinnzahl.",
                checkAnotherButton: "Erneut prüfen",
                langToggle: "ENGLISH",
                inputAriaLabel: "Losenummern-Eingabe",
                prizeHeader: "Preis Nr.",
                sponsoredBy: "Gesponsert von",
            },
        };

        // --- APPLICATION STATE ---
        let state = {
            language: 'de',
            result: 'idle',
            inputValue: '',
            winningPrize: null,
        };

        function setState(newState) {
            state = { ...state, ...newState };
            render();
        }

        // --- UI COMPONENTS ---
        function App() {
            const t = translations[state.language];
            const showResult = state.result !== 'idle';

            return `
                <button class="lang-toggle" data-action="toggle-lang">${t.langToggle}</button>
                <div class="app-container">
                    <div class="logo-header">
                        <span class="logo-main">ALTSTADT</span>
                        <span class="logo-sub">SOMMER</span>
                    </div>
                    <h1 class="title">${t.title}</h1>
                    ${showResult ? ResultView() : FormView()}
                </div>
            `;
        }

        function FormView() {
            const t = translations[state.language];
            return `
                <label class="label" for="number-input">${t.label}</label>
                <input 
                    type="number"
                    id="number-input"
                    class="input-field"
                    value="${state.inputValue}"
                    placeholder="${t.label}"
                    aria-label="${t.inputAriaLabel}"
                    oninput="this.value=this.value.replace(/[^0-9]/g,'');"
                    data-action="input-change"
                />
                <button 
                    class="button" 
                    data-action="check-number"
                    ${!state.inputValue ? 'disabled' : ''}
                >
                    ${t.checkButton}
                </button>
            `;
        }

        function ResultView() {
            const t = translations[state.language];
            const isWin = state.result === 'win';
            const message = isWin ? t.winMessage : t.lossMessage;
            const icon = isWin ? '🏆' : '✗';
            const iconClass = isWin ? 'win' : 'loss';

            let prizeDetails = '';
            if (isWin && state.winningPrize) {
                prizeDetails = `
                    <div class="prize-card">
                        <h3 class="prize-header">${t.prizeHeader} ${state.winningPrize.nr}</h3>
                        <p class="prize-description">${state.winningPrize.prize}</p>
                        <p class="prize-sponsor">${t.sponsoredBy}: ${state.winningPrize.sponsor}</p>
                    </div>
                `;
            }

            return `
                <div class="result-container" role="alert" aria-live="assertive">
                    <div class="result-icon ${iconClass}" aria-hidden="true">${icon}</div>
                    <p class="result-text">${message}</p>
                    ${prizeDetails}
                    <button class="button" data-action="check-another">${t.checkAnotherButton}</button>
                </div>
            `;
        }

        // --- RENDER & EVENT HANDLING ---
        const root = document.getElementById('root');

        function render() {
            if (root) {
                document.documentElement.lang = state.language; // Dynamically set page language for screen readers
                root.innerHTML = App();
                // After rendering, manage focus for better keyboard navigation
                if (state.result === 'idle') {
                    const input = root.querySelector('#number-input');
                    if (input) {
                        input.focus();
                    }
                } else {
                    const button = root.querySelector('[data-action="check-another"]');
                    if(button) {
                        button.focus();
                    }
                }
            }
        }

        function handleCheckNumber() {
            if (state.inputValue) {
                const num = parseInt(state.inputValue, 10);
                const prize = prizes[num];
                if (prize) {
                    setState({ result: 'win', winningPrize: prize });
                    // Trigger celebration effects
                    if (typeof confetti === 'function') {
                        confetti({
                            particleCount: 150,
                            spread: 90,
                            origin: { y: 0.6 }
                        });
                    }
                } else {
                    setState({ result: 'loss', winningPrize: null });
                }
            }
        }

        function handleAction(e) {
            const target = e.target;
            const action = target.dataset.action;

            switch (action) {
                case 'toggle-lang':
                    setState({ language: state.language === 'en' ? 'de' : 'en' });
                    break;
                case 'check-number':
                    handleCheckNumber();
                    break;
                case 'check-another':
                    setState({ result: 'idle', inputValue: '', winningPrize: null });
                    break;
                case 'input-change':
                    if (e.target instanceof HTMLInputElement) {
                        state.inputValue = e.target.value;
                        const button = root.querySelector('[data-action="check-number"]');
                        if (button) {
                            button.disabled = !state.inputValue;
                        }
                    }
                    break;
            }
        }

        function handleKeydown(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                if (state.result !== 'idle') {
                    setState({ result: 'idle', inputValue: '', winningPrize: null });
                }
                else if (document.activeElement?.id === 'number-input' && state.inputValue) {
                    handleCheckNumber();
                }
            }
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            if (root) {
                root.addEventListener('click', handleAction);
                root.addEventListener('input', handleAction);
                document.addEventListener('keydown', handleKeydown);
                render();
            }
        });
    </script>
</body>
</html>
